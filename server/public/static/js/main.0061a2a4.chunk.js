(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e,t,a){},119:function(e,t,a){},121:function(e,t,a){},123:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),c=a.n(l),o=a(7),s=a(8),i=a(11),u=a(12),m=a(13),d=(a(93),a(94),a(39)),h=a.n(d),p=function e(){var t=this;Object(o.a)(this,e),this.signup=function(e){var a=e.email,n=e.password;return t.service.post("/signup",{email:a,password:n}).then((function(e){return e.data}))},this.login=function(e){var a=e.email,n=e.password;return t.service.post("/login",{email:a,password:n}).then((function(e){return e.data}))},this.logout=function(){return t.service.post("/logout").then((function(e){return e.data}))},this.loggedin=function(){return t.service.get("/loggedin").then((function(e){return e.data}))},this.service=h.a.create({baseURL:"".concat("https://relakso-reactjs-app.herokuapp.com/api","/auth"),withCredentials:!0})},E=a(44),g=a(36),b=a(19),v=a(9),f=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).logout=function(){a.authServices.logout().then((function(e){a.props.setTheUser(!1)})).catch((function(e){return console.log(e)}))},a.state={},a.authServices=new p,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.loggedInUser?r.a.createElement(r.a.Fragment,null,"Hola, ",this.props.loggedInUser.name):r.a.createElement(r.a.Fragment,null,"Hola, invitad@");return this.props.loggedInUser?r.a.createElement(g.a,{bg:"dark",expand:"lg",variant:"dark"},r.a.createElement(g.a.Brand,{href:"#home"},"Relakso e-Commerce"),r.a.createElement(g.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(g.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(b.a,{className:"ml-auto"},r.a.createElement(b.a.Link,{as:"div"}," ",r.a.createElement(v.b,{to:"/"},"Inicio")),r.a.createElement(b.a.Link,{as:"div"}," ",r.a.createElement(v.b,{to:"/profile"},"Perfil")),r.a.createElement(b.a.Link,{as:"div"}," ",r.a.createElement(v.b,{to:"/admin/products/create"},"Crear producto")),r.a.createElement(b.a.Link,{as:"div"}," ",r.a.createElement(v.b,{to:"/admin/products/products-list"},"Lista de productos")),r.a.createElement(b.a.Link,{as:"div"}," ",r.a.createElement(v.b,{to:"/admin/users/users-list"},"Lista de usuarios")),r.a.createElement(b.a.Link,{as:"div"}," ",r.a.createElement(v.b,{to:"/admin/users/create-user"},"Crear usuario")),r.a.createElement(b.a.Link,{as:"div"}," ",r.a.createElement(v.b,{to:"/cuenta/editar"},"Editar mi cuenta")),r.a.createElement(b.a.Link,{onClick:this.logout},"Cerrar sesi\xf3n"),r.a.createElement(b.a.Link,{as:"div"},e)))):r.a.createElement(g.a,{bg:"dark",expand:"lg",variant:"dark"},r.a.createElement(g.a.Brand,{href:"#home"},"Relakso e-Commerce"),r.a.createElement(g.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(g.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(b.a,{className:"ml-auto"},r.a.createElement(b.a.Link,{as:"div"}," ",r.a.createElement(v.b,{to:"/"},"Inicio")),r.a.createElement(b.a.Link,{as:"div"}," ",r.a.createElement(v.b,{to:"/signup"},"Registro")),r.a.createElement(b.a.Link,{as:"div"}," ",r.a.createElement(v.b,{to:"/login"},"Inicio sesi\xf3n")),r.a.createElement(b.a.Link,{as:"div"},e))))}}]),t}(n.Component),C=a(20),y=a(16),S=a(18),j=(a(53),a(118),function e(){var t=this;Object(o.a)(this,e),this.getAllProducts=function(){return t.service.get("/getAllProducts").then((function(e){return e.data}))},this.getProductDetails=function(e){return t.service.get("/getOneProduct/".concat(e)).then((function(e){return e.data}))},this.postProduct=function(e){return t.service.post("/new",e).then((function(e){return e.data}))},this.updateProduct=function(e,a){return t.service.put("/update/".concat(e),a).then((function(e){return e.data}))},this.deleteProduct=function(e){return t.service.delete("/delete/".concat(e)).then((function(e){return e.data}))},this.searchProduct=function(e){return t.service.post("/search",{search:e}).then((function(e){return e.data}))},this.service=h.a.create({baseURL:"".concat("https://relakso-reactjs-app.herokuapp.com/api","/products"),withCredentials:!0})}),k=function e(){var t=this;Object(o.a)(this,e),this.handleUpload=function(e){return t.service.post("/upload",e).then((function(e){return e.data}))},this.service=h.a.create({baseURL:"".concat("https://relakso-reactjs-app.herokuapp.com/api","/files"),withCredentials:!0})},O=a(2),U=a(15),w=a(28),x=a(32),L=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).finishAction=function(){a.setState({product:{name:"",excerpt:"",category:"",tags:"",images:[],model:[]}})},a.postProduct=function(){a.ProductServices.postProduct(a.state.product).then((function(){return a.finishAction()})).catch((function(e){return console.log(e)}))},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState({product:Object(S.a)({},a.state.product,Object(y.a)({},n,r))})},a.handleSubmit=function(e){e.preventDefault(),a.postProduct()},a.handleChangeVariant=function(e){var t=e.target,n=t.name,r=t.value;a.setState({variant:Object(S.a)({},a.state.variant,Object(y.a)({},n,r))})},a.handleSubmitVariant=function(e){e.preventDefault();var t=Object(C.a)(a.state.product.model);t.push(a.state.variant),a.setState({product:Object(S.a)({},a.state.product,{model:t}),variant:{size:"",stock:0,price:0},showmodal:!1})},a.deleteVariant=function(e){var t=Object(C.a)(a.state.product.model);t.splice(e,1),a.setState({product:Object(S.a)({},a.state.product,{model:t})})},a.handleFileUpload=function(e){var t=new FormData;for(var n in e.target.files)t.append("images",e.target.files[n]);a.filesServices.handleUpload(t).then((function(e){a.setState({product:Object(S.a)({},a.state.product,{images:e.secure_url})})})).catch((function(e){return console.log(e)}))},a.toggleModal=function(){return a.setState({showmodal:!a.state.showmodal})},a.ProductServices=new j,a.filesServices=new k,a.state={product:{name:"",excerpt:"",category:"",tags:"",images:[],model:[]},variant:{size:"",stock:0,price:0}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"py-5 create-product"},r.a.createElement(O.a,{onSubmit:this.handleSubmit},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Nombre"),r.a.createElement(O.a.Control,{type:"text",name:"name",value:this.state.product.name,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Descripci\xf3n corta"),r.a.createElement(O.a.Control,{type:"text",name:"excerpt",value:this.state.product.excerpt,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Categor\xeda"),r.a.createElement(O.a.Control,{type:"text",name:"category",value:this.state.product.category,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Etiquetas de b\xfasqueda"),r.a.createElement(O.a.Control,{type:"text",name:"tags",value:this.state.product.tags,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Im\xe1genes"),r.a.createElement(O.a.Control,{type:"file",name:"images",onChange:this.handleFileUpload,multiple:!0}),0!==this.state.product.images?this.state.product.images.map((function(e,t){return r.a.createElement("img",{className:"m-3",src:e,key:t,alt:t,style:{width:"50px"}})})):"No hay im\xe1genes cargadas")),r.a.createElement(w.a,{show:this.state.showmodal,onHide:this.toggleModal},r.a.createElement(w.a.Body,null,r.a.createElement(O.a,{onSubmit:this.handleSubmitVariant},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Medida"),r.a.createElement(O.a.Control,{type:"text",name:"size",value:this.state.variant.size,onChange:this.handleChangeVariant})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Price"),r.a.createElement(O.a.Control,{type:"number",name:"price",value:this.state.variant.price,onChange:this.handleChangeVariant})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Stock"),r.a.createElement(O.a.Control,{type:"number",name:"stock",value:this.state.variant.stock,onChange:this.handleChangeVariant})),r.a.createElement(U.a,{variant:"dark",type:"submit",onSubmit:this.handleSubmitVariant},"A\xf1adir nueva variante al producto")))),r.a.createElement("h3",null,"Variaciones"),r.a.createElement(U.a,{className:"mb-20",variant:"outline-light",onClick:this.toggleModal},"Crear nueva variaci\xf3n"),r.a.createElement(x.a,{striped:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Size"),r.a.createElement("th",null,"Stock"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.state.product.model.map((function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.size),r.a.createElement("td",null,t.stock),r.a.createElement("td",null,t.price,"\u20ac"),r.a.createElement("td",null,r.a.createElement(U.a,{className:"mb-20",variant:"outline-danger",onClick:function(){return e.deleteVariant(a)}},"Borrar")))})))),r.a.createElement("hr",null),r.a.createElement(U.a,{variant:"outline-success",type:"submit",size:"lg",block:!0,onClick:this.handleSubmit},"Crear nuevo producto"))}}]),t}(n.Component),P=a(17),N=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).closeModal=function(){return a.setState({showmodal:!1})},a.openModal=function(){return a.setState({showmodal:!0})},a.state={products:[],showmodal:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(P.a,null,r.a.createElement("h1",null,"Bienvenido a Relakso"),this.props.loggedInUser&&r.a.createElement(v.b,{as:"button",className:"mb-20 p-2 btn btn-info",to:"/admin/products/create"},"Crear nuevo producto"),r.a.createElement(w.a,{show:this.state.showmodal,onHide:this.closeModal},r.a.createElement(w.a.Body,null,r.a.createElement("h3",null,"Nuevo producto"),r.a.createElement("hr",null),r.a.createElement(L,{closeModal:this.closeModal}))))}}]),t}(n.Component),I=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(y.a)({},n,r))},a.postUser=function(){a.authServices.signup(a.state).then((function(e){a.setState({email:"",password:""}),a.props.setTheUser(e)})).catch((function(e){return console.log({err:e})}))},a.handleSubmit=function(e){e.preventDefault(),a.postUser()},a.state={email:"",password:"",errorMessage:""},a.authServices=new p,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(P.a,null,r.a.createElement("h1",null,"Registro de usuarios"),r.a.createElement(O.a,{onSubmit:this.handleSubmit},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Email"),r.a.createElement(O.a.Control,{type:"email",name:"email",pattern:"[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*@[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)*[.][a-zA-Z]{1,5}",placeholder:"Enter email",value:this.state.email,onChange:this.handleChange}),r.a.createElement(O.a.Text,{className:"text-muted"},"We'll never share your email with anyone else.")),r.a.createElement(O.a.Group,{controlId:"formBasicPassword"},r.a.createElement(O.a.Label,null,"Contrase\xf1a"),r.a.createElement(O.a.Control,{type:"password",pattern:".{6,}",name:"password",placeholder:"Contrase\xf1a",value:this.state.password,onChange:this.handleChange})),r.a.createElement(O.a.Group,{controlId:"formBasicCheckbox"},r.a.createElement(O.a.Check,{type:"checkbox",label:"Check me out"})),r.a.createElement(U.a,{variant:"outline-dark",type:"submit"},"Registrarse")),r.a.createElement("p",null,this.state.errorMessage))}}]),t}(n.Component),V=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(y.a)({},n,r))},a.postUser=function(){a.authServices.login(a.state).then((function(e){a.setState({email:"",password:""}),a.props.setTheUser(e),a.props.history.push("/")})).catch((function(e){return console.log({err:e})}))},a.handleSubmit=function(e){e.preventDefault(),a.postUser()},a.state={email:"",password:""},a.authServices=new p,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(P.a,null,r.a.createElement("h1",null,"Inicio de sesi\xf3n"),r.a.createElement(O.a,{onSubmit:this.handleSubmit},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Usuario"),r.a.createElement(O.a.Control,{type:"text",name:"email",value:this.state.email,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Contrase\xf1a"),r.a.createElement(O.a.Control,{type:"password",name:"password",value:this.state.password,onChange:this.handleChange})),r.a.createElement(U.a,{variant:"dark",type:"submit"},"Iniciar sesi\xf3n")))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={products:[],showmodal:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"admin-body"},r.a.createElement(P.a,null,r.a.createElement("h1",{className:"text-center"},"Panel de creaci\xf3n de producto"),r.a.createElement(L,null)))}}]),t}(n.Component),G=(a(119),a(84)),A=a.n(G),M=a(83),D=a.n(M),T=function(e){var t=e.name,a=e.images,n=(e.excerpt,e.category),l=(e.tags,e.model,e._id),c=e.deleteProduct;return r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("img",{src:a[0],alt:t,style:{width:"50px"}})),r.a.createElement("td",null,t),r.a.createElement("td",null,n),r.a.createElement("td",{className:"d-flex"},r.a.createElement(v.b,{as:"button",className:"p-2 my-2 btn btn-outline-info",to:"/products/".concat(l)},r.a.createElement(D.a,{fontSize:"small"})),r.a.createElement(U.a,{variant:"outline-danger",className:"ml-4 m-2 p-2",onClick:c},r.a.createElement(A.a,{fontSize:"small"}))))},B=a(61),R=a(43),_=a(138),F=a(85),H=a.n(F),q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){return a.getAllProducts()},a.getAllProducts=function(){a.productServices.getAllProducts().then((function(e){return a.setState({products:e})})).catch((function(e){return console.log(e)}))},a.deleteProduct=function(e){a.productServices.deleteProduct(e).then((function(){return a.getAllProducts()})).catch((function(e){return console.log(e)}))},a.searchProduct=function(e){a.productServices.searchProduct(e).then((function(e){return a.setState({products:e})})).catch((function(e){return console.log(e)}))},a.handleChangeVariant=function(e){var t=e.target.value;a.searchProduct(t)},a.state={products:[],showmodal:!1},a.productServices=new j,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"admin-body"},r.a.createElement(P.a,{className:"pb-5"},r.a.createElement(B.a,{className:"mb-3"},r.a.createElement(R.a,{sm:8},r.a.createElement("h1",null,"Listado de productos")),r.a.createElement(R.a,{sm:4},this.props.loggedInUser&&r.a.createElement(v.b,{className:"float-right mobile-button",to:"/admin/products/create"},r.a.createElement(_.a,{style:{backgroundColor:"#4caf50"},"aria-label":"add"},r.a.createElement(H.a,null))))),r.a.createElement("input",{className:"form-control mr-sm-2",value:this.productsSearched,type:"search",name:"search",placeholder:"Search","aria-label":"Search",id:"index-input",onChange:this.handleChangeVariant}),this.state.products.length?r.a.createElement(x.a,{responsive:!0,striped:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Imagen"),r.a.createElement("th",null,"Producto"),r.a.createElement("th",null,"Categor\xeda"),r.a.createElement("th",null,"Acci\xf3n"))),r.a.createElement("tbody",null,this.state.products.map((function(t){return r.a.createElement(T,Object.assign({key:t._id},t,{deleteProduct:function(){return e.deleteProduct(t._id)}}))})))):r.a.createElement("p",null,"No hay resultados...")))}}]),t}(n.Component),Z=function e(){var t=this;Object(o.a)(this,e),this.getAllUsers=function(){return t.service.get("/getAllUsers").then((function(e){return e.data}))},this.getUserDetails=function(e){return t.service.get("/getOneUser/".concat(e)).then((function(e){return e.data}))},this.postUser=function(e){return t.service.post("/new",e).then((function(e){return e.data}))},this.updateUser=function(e,a){return t.service.put("/update/".concat(e),a).then((function(e){return e.data}))},this.deleteUser=function(e){return t.service.delete("/delete/".concat(e)).then((function(e){return e.data}))},this.searchUser=function(e){return t.service.post("/search",{search:e}).then((function(e){return e.data}))},this.service=h.a.create({baseURL:"".concat("https://relakso-reactjs-app.herokuapp.com/api","/users"),withCredentials:!0})},J=function(e){var t=e.email,a=e.name,n=e.city,l=e.phone,c=e.role;e._id;return r.a.createElement("tr",null,r.a.createElement("td",null,t),r.a.createElement("td",null,a),r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,c),r.a.createElement("td",null,r.a.createElement(v.b,{as:"button",className:"mb-20 p-2 btn btn-outline-success",to:"/"},"Modificar")))},W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){return a.getAllUsers()},a.getAllUsers=function(){a.productServices.getAllUsers().then((function(e){return a.setState({users:e})})).catch((function(e){return console.log(e)}))},a.state={users:[],showmodal:!1},a.productServices=new Z,a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"admin-body"},r.a.createElement(P.a,{className:"pb-5"},r.a.createElement(B.a,null,r.a.createElement(R.a,{sm:8},r.a.createElement("h1",null,"Listado de usuarios")),r.a.createElement(R.a,{sm:4},this.props.loggedInUser&&r.a.createElement(v.b,{as:"button",className:"mb-20 p-2 btn btn-outline-warning btn-block",to:"/admin/users/create"},"Crear nuevo usuario"))),this.state.users.length?r.a.createElement(x.a,{responsive:!0,striped:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Nombre"),r.a.createElement("th",null,"Ciudad"),r.a.createElement("th",null,"Tel\xe9fono"),r.a.createElement("th",null,"Rol"),r.a.createElement("th",null,"Acci\xf3n"))),r.a.createElement("tbody",null,this.state.users.map((function(e){return r.a.createElement(J,Object.assign({key:e._id},e))})))):r.a.createElement("p",null,"CARGANDO...")))}}]),t}(n.Component),K=(a(121),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).finishAction=function(){a.setState({user:{name:"",lastName:"",role:"",street:"",zipCode:"",city:"",state:"",phone:""}})},a.postUser=function(){a.UserServices.postUser(a.state.user).then((function(){return a.finishAction()})).catch((function(e){return console.log(e)}))},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState({user:Object(S.a)({},a.state.user,Object(y.a)({},n,r))})},a.handleSubmit=function(e){e.preventDefault(),a.postProduct()},a.closeModal=function(){return a.setState({showmodal:!1})},a.openModal=function(){return a.setState({showmodal:!0})},a.Userervices=new Z,a.state={user:{name:"",lastName:"",role:"",street:"",zipCode:"",city:"",state:"",phone:""}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"py-5 create-product"},r.a.createElement(O.a,{onSubmit:this.handleSubmit},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Nombre"),r.a.createElement(O.a.Control,{type:"text",name:"name",value:this.state.user.name,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Apellidos"),r.a.createElement(O.a.Control,{type:"text",name:"lastName",value:this.state.user.lastName,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Rol"),r.a.createElement(O.a.Control,{type:"text",name:"role",value:this.state.user.role,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Ciudad"),r.a.createElement(O.a.Control,{type:"text",name:"city",value:this.state.user.city,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"C\xf3digo postal"),r.a.createElement(O.a.Control,{type:"text",name:"zipCode",value:this.state.user.zipCode,onChange:this.handleChange}))),r.a.createElement(U.a,{variant:"outline-success",type:"submit",size:"lg",block:!0,onClick:this.handleSubmit},"Crear nuevo usuario"))}}]),t}(n.Component)),Q=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={products:[],showmodal:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"admin-body"},r.a.createElement(P.a,null,r.a.createElement("h1",{className:"text-center"},"Panel de creaci\xf3n de usuario"),r.a.createElement(K,null)))}}]),t}(n.Component),X=(a(80),a(48)),Y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.getUserDetails()},a.getUserDetails=function(){a.userServices.getUserDetails(a.props.match.params.id).then((function(e){return a.setState({user:e})})).catch((function(e){return console.log(e)}))},a.updateUser=function(){a.userServices.updateUser(a.props.match.params.id,a.state.user).then((function(e){return a.setState({user:e})})).catch((function(e){return console.log(e)}))},a.handleSubmit=function(e){e.preventDefault(),a.updateUser(),a.toggleToast()},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState({user:Object(S.a)({},a.state.user,Object(y.a)({},n,r))})},a.toggleToast=function(){return a.setState({showtoast:!a.state.showtoast})},a.toggleModal=function(){return a.setState({showmodal:!a.state.showmodal})},a.userServices=new Z,a.state={user:{email:"",role:"",name:"",lastName:"",street:"",zipCode:"",city:"",state:"",phone:"",wishlist:[],orders:[]},modelPrev:[],showtoast:!1,showmodal:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(P.a,{className:"client-body"},r.a.createElement("h1",null,this.state.product.name),r.a.createElement(O.a,{onSubmit:this.handleSubmit},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Nombre"),r.a.createElement(O.a.Control,{type:"text",name:"name",value:this.state.product.name,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Descripci\xf3n corta"),r.a.createElement(O.a.Control,{type:"text",name:"excerpt",value:this.state.product.excerpt,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Categor\xeda"),r.a.createElement(O.a.Control,{type:"text",name:"category",value:this.state.product.category,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Etiquetas de b\xfasqueda"),r.a.createElement(O.a.Control,{type:"text",name:"tags",value:this.state.product.tags,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Im\xe1genes"),r.a.createElement(O.a.Control,{type:"file",name:"images",onChange:this.handleFileUpload,multiple:!0}),0!==this.state.product.images?this.state.product.images.map((function(t,a){return r.a.createElement("img",{className:"m-3",src:t,key:a,alt:a,onClick:function(){return e.mainImage({idx:a})},style:{width:"50px"}})})):"No hay im\xe1genes cargadas")),r.a.createElement(w.a,{show:this.state.showmodal,onHide:this.toggleModal},r.a.createElement(w.a.Body,null,r.a.createElement(O.a,{onSubmit:this.handleSubmitVariant},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Medida"),r.a.createElement(O.a.Control,{type:"text",name:"size",value:this.state.variant.size,onChange:this.handleChangeVariant})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Price"),r.a.createElement(O.a.Control,{type:"number",name:"price",value:this.state.variant.price,onChange:this.handleChangeVariant})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Stock"),r.a.createElement(O.a.Control,{type:"number",name:"stock",value:this.state.variant.stock,onChange:this.handleChangeVariant})),r.a.createElement(U.a,{variant:"dark",type:"submit",onSubmit:this.handleSubmitVariant},"A\xf1adir nueva variante al producto")))),r.a.createElement("h3",null,"Variaciones"),r.a.createElement(U.a,{className:"mb-20",variant:"outline-dark",onClick:this.toggleModal},"Crear nueva variaci\xf3n"),r.a.createElement(x.a,{responsive:!0,striped:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Size"),r.a.createElement("th",null,"Stock"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.state.modelPrev.map((function(t,a){return r.a.createElement("tr",{id:a,key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"size","data-id":a,value:t.size,onChange:e.handleUpdateVariant})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"stock","data-id":a,value:t.stock,onChange:e.handleUpdateVariant})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"price","data-id":a,value:t.price,onChange:e.handleUpdateVariant})),r.a.createElement("td",null,r.a.createElement(U.a,{className:"mb-20",variant:"outline-danger",onClick:function(){return e.deleteVariant(a)}},"Borrar")))})))),r.a.createElement(U.a,{variant:"outline-success",type:"submit",size:"lg",block:!0,onClick:this.handleSubmit},"Modificar producto"),r.a.createElement(X.a,{onClose:function(){return e.toggleToast()},show:this.state.showtoast,delay:3e3,autohide:!0},r.a.createElement(X.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},"El usuario ha sido modificado correctamente"))),r.a.createElement(U.a,{as:"div",variant:"dark",size:"sm"},r.a.createElement(v.b,{to:"/"},"Volver a tu cuenta")))}}]),t}(n.Component),$=a(67),ee=a.n($),te=a(86),ae=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).componentDidMount=function(){a.getProductDetails()},a.getProductDetails=function(){a.productServices.getProductDetails(a.props.match.params.id).then((function(e){return a.setState({product:e})})).then((function(){return a.setState({modelPrev:Object(C.a)(a.state.product.model)})})).catch((function(e){return console.log(e)}))},a.updateProduct=function(){a.productServices.updateProduct(a.props.match.params.id,a.state.product).then((function(e){return a.setState({product:e})})).catch((function(e){return console.log(e)}))},a.handleSubmit=function(){var e=Object(te.a)(ee.a.mark((function e(t){return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,a.setVariants();case 3:a.updateProduct(),a.toggleToast();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState({product:Object(S.a)({},a.state.product,Object(y.a)({},n,r))})},a.handleFileUpload=function(e){var t=new FormData;for(var n in e.target.files)t.append("images",e.target.files[n]);a.filesServices.handleUpload(t).then((function(e){a.setState({product:Object(S.a)({},a.state.product,{images:e.secure_url})})})).catch((function(e){return console.log(e)}))},a.handleChangeVariant=function(e){var t=e.target,n=t.name,r=t.value;a.setState({variant:Object(S.a)({},a.state.variant,Object(y.a)({},n,r))})},a.handleUpdateVariant=function(e){var t=e.target.dataset.id,n=Object(C.a)(a.state.modelPrev),r=document.getElementById(t).querySelectorAll("td input"),l={};r.forEach((function(e){return l[e.name]=e.value})),n.splice(t,1,l),a.setState({modelPrev:n})},a.setVariants=function(){var e=Object(C.a)(a.state.modelPrev);a.setState({product:Object(S.a)({},a.state.product,{model:e})})},a.handleSubmitVariant=function(e){e.preventDefault();var t=Object(C.a)(a.state.product.model);t.push(a.state.variant),a.setState({product:Object(S.a)({},a.state.product,{model:t}),variant:{size:"",stock:0,price:0},showmodal:!1})},a.deleteVariant=function(e){var t=Object(C.a)(a.state.modelPrev);t.splice(e,1),a.setState({modelPrev:t})},a.toggleToast=function(){return a.setState({showtoast:!a.state.showtoast})},a.toggleModal=function(){return a.setState({showmodal:!a.state.showmodal})},a.mainImage=function(e){var t=Object(C.a)(a.state.product.images),n=e.idx;t.unshift(t.splice(n,1).toString()),a.setState({product:Object(S.a)({},a.state.product,{images:t})})},a.productServices=new j,a.filesServices=new k,a.state={product:{name:"",excerpt:"",category:"",tags:"",images:[],model:[]},variant:{size:"",stock:0,price:0},modelPrev:[],showtoast:!1,showmodal:!1},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(P.a,{className:"client-body"},r.a.createElement("h1",null,this.state.product.name),r.a.createElement(O.a,{onSubmit:this.handleSubmit},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Nombre"),r.a.createElement(O.a.Control,{type:"text",name:"name",value:this.state.product.name,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Descripci\xf3n corta"),r.a.createElement(O.a.Control,{type:"text",name:"excerpt",value:this.state.product.excerpt,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Categor\xeda"),r.a.createElement(O.a.Control,{type:"text",name:"category",value:this.state.product.category,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Etiquetas de b\xfasqueda"),r.a.createElement(O.a.Control,{type:"text",name:"tags",value:this.state.product.tags,onChange:this.handleChange})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Im\xe1genes"),r.a.createElement(O.a.Control,{type:"file",name:"images",onChange:this.handleFileUpload,multiple:!0}),0!==this.state.product.images?this.state.product.images.map((function(t,a){return r.a.createElement("img",{className:"m-3",src:t,key:a,alt:a,onClick:function(){return e.mainImage({idx:a})},style:{width:"50px"}})})):"No hay im\xe1genes cargadas")),r.a.createElement(w.a,{show:this.state.showmodal,onHide:this.toggleModal},r.a.createElement(w.a.Body,null,r.a.createElement(O.a,{onSubmit:this.handleSubmitVariant},r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Medida"),r.a.createElement(O.a.Control,{type:"text",name:"size",value:this.state.variant.size,onChange:this.handleChangeVariant})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Price"),r.a.createElement(O.a.Control,{type:"number",name:"price",value:this.state.variant.price,onChange:this.handleChangeVariant})),r.a.createElement(O.a.Group,null,r.a.createElement(O.a.Label,null,"Stock"),r.a.createElement(O.a.Control,{type:"number",name:"stock",value:this.state.variant.stock,onChange:this.handleChangeVariant})),r.a.createElement(U.a,{variant:"dark",type:"submit",onSubmit:this.handleSubmitVariant},"A\xf1adir nueva variante al producto")))),r.a.createElement("h3",null,"Variaciones"),r.a.createElement(U.a,{className:"mb-20",variant:"outline-dark",onClick:this.toggleModal},"Crear nueva variaci\xf3n"),r.a.createElement(x.a,{responsive:!0,striped:!0,bordered:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"#"),r.a.createElement("th",null,"Size"),r.a.createElement("th",null,"Stock"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,this.state.modelPrev.map((function(t,a){return r.a.createElement("tr",{id:a,key:a},r.a.createElement("td",null,a+1),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"size","data-id":a,value:t.size,onChange:e.handleUpdateVariant})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"stock","data-id":a,value:t.stock,onChange:e.handleUpdateVariant})),r.a.createElement("td",null,r.a.createElement("input",{type:"text",name:"price","data-id":a,value:t.price,onChange:e.handleUpdateVariant})),r.a.createElement("td",null,r.a.createElement(U.a,{className:"mb-20",variant:"outline-danger",onClick:function(){return e.deleteVariant(a)}},"Borrar")))})))),r.a.createElement(U.a,{variant:"outline-success",type:"submit",size:"lg",block:!0,onClick:this.handleSubmit},"Modificar producto"),r.a.createElement(X.a,{onClose:function(){return e.toggleToast()},show:this.state.showtoast,delay:3e3,autohide:!0},r.a.createElement(X.a.Header,null,r.a.createElement("strong",{className:"mr-auto"},"El producto ha sido modificado"))),r.a.createElement(U.a,{as:"div",variant:"dark",size:"sm"},r.a.createElement(v.b,{to:"/admin/products/products-list"},"Volver al listado de productos")))}}]),t}(n.Component),ne=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).componentDidUpdate=function(t,a){return console.log("El estado de App se ha actualizado:",e.state)},e.componentDidMount=function(){return e.fetchUser()},e.setTheUser=function(t){return e.setState({loggedInUser:t})},e.fetchUser=function(){e.authServices.loggedin().then((function(t){return e.setState({loggedInUser:t})})).catch((function(){return e.setState({loggedInUser:!1})}))},e.state={loggedInUser:!1},e.authServices=new p,e}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"App-header"},r.a.createElement(f,{setTheUser:this.setTheUser,loggedInUser:this.state.loggedInUser}),r.a.createElement("main",null,r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/",render:function(){return r.a.createElement(N,{loggedInUser:e.state.loggedInUser})}}),r.a.createElement(E.b,{path:"/signup",render:function(){return r.a.createElement(I,{setTheUser:e.setTheUser})}}),r.a.createElement(E.b,{path:"/login",render:function(t){return r.a.createElement(V,Object.assign({setTheUser:e.setTheUser},t))}}),r.a.createElement(E.b,{path:"/admin/products/create",render:function(){return e.state.loggedInUser?r.a.createElement(z,{loggedInUser:e.state.loggedInUser}):r.a.createElement(E.a,{to:"/"})}}),r.a.createElement(E.b,{path:"/admin/products/products-list",render:function(){return e.state.loggedInUser?r.a.createElement(q,{loggedInUser:e.state.loggedInUser}):r.a.createElement(E.a,{to:"/"})}}),r.a.createElement(E.b,{path:"/products/:id",render:function(e){return r.a.createElement(ae,e)}}),r.a.createElement(E.b,{path:"/admin/users/users-list",render:function(){return e.state.loggedInUser?r.a.createElement(W,{loggedInUser:e.state.loggedInUser}):r.a.createElement(E.a,{to:"/"})}}),r.a.createElement(E.b,{path:"/admin/users/create-user",render:function(){return e.state.loggedInUser?r.a.createElement(Q,{loggedInUser:e.state.loggedInUser}):r.a.createElement(E.a,{to:"/"})}}),r.a.createElement(E.b,{path:"/cuenta/editar",render:function(){return e.state.loggedInUser?r.a.createElement(Y,{loggedInUser:e.state.loggedInUser}):r.a.createElement(E.a,{to:"/"})}}))))}}]),t}(n.Component);c.a.render(r.a.createElement(v.a,null,r.a.createElement(ne,null)),document.getElementById("root"))},53:function(e,t,a){},80:function(e,t,a){},88:function(e,t,a){e.exports=a(123)},94:function(e,t,a){}},[[88,1,2]]]);
//# sourceMappingURL=main.0061a2a4.chunk.js.map